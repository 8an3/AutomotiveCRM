"use strict";Object.defineProperty(exports, "__esModule", {value: true});

var _KLZID3QOcjs = require('./KLZID3QO.cjs');




var _7NAIPZYNcjs = require('./7NAIPZYN.cjs');


var _NREUHWTUcjs = require('./NREUHWTU.cjs');




var _6455U47Tcjs = require('./6455U47T.cjs');

// src/composite/composite-input.ts




var _dom = require('@ariakit/core/utils/dom');
function getValueLength(element) {
  if (_dom.isTextField.call(void 0, element)) {
    return element.value.length;
  } else if (element.isContentEditable) {
    const range = _dom.getDocument.call(void 0, element).createRange();
    range.selectNodeContents(element);
    return range.toString().length;
  }
  return 0;
}
var useCompositeInput = _7NAIPZYNcjs.createHook.call(void 0, 
  (_a) => {
    var _b = _a, { store } = _b, props = _6455U47Tcjs.__objRest.call(void 0, _b, ["store"]);
    const onKeyDownCaptureProp = props.onKeyDownCapture;
    const onKeyDownCapture = _NREUHWTUcjs.useEvent.call(void 0, 
      (event) => {
        onKeyDownCaptureProp == null ? void 0 : onKeyDownCaptureProp(event);
        if (event.defaultPrevented)
          return;
        const element = event.currentTarget;
        if (!element.isContentEditable && !_dom.isTextField.call(void 0, element))
          return;
        const selection = _dom.getTextboxSelection.call(void 0, element);
        if (event.key === "ArrowRight" || event.key === "ArrowDown") {
          if (selection.end !== getValueLength(element)) {
            event.stopPropagation();
          }
        } else if (event.key === "ArrowLeft" || event.key === "ArrowUp") {
          if (selection.start !== 0) {
            event.stopPropagation();
          }
        }
      }
    );
    const onFocusProp = props.onFocus;
    const onFocus = _NREUHWTUcjs.useEvent.call(void 0, (event) => {
      onFocusProp == null ? void 0 : onFocusProp(event);
      if (event.defaultPrevented)
        return;
      _KLZID3QOcjs.selectTextField.call(void 0, event.currentTarget);
    });
    props = _6455U47Tcjs.__spreadProps.call(void 0, _6455U47Tcjs.__spreadValues.call(void 0, {}, props), {
      onKeyDownCapture,
      onFocus
    });
    return props;
  }
);
var CompositeInput = _7NAIPZYNcjs.createComponent.call(void 0, 
  (props) => {
    const htmlProps = useCompositeInput(props);
    return _7NAIPZYNcjs.createElement.call(void 0, "input", htmlProps);
  }
);
if (process.env.NODE_ENV !== "production") {
  CompositeInput.displayName = "CompositeInput";
}




exports.useCompositeInput = useCompositeInput; exports.CompositeInput = CompositeInput;
