Object.defineProperty(exports, '__esModule', { value: true });

const react = require('@sentry/react');
const performance = require('./performance.js');

/**
 * Creates a browser tracing integration for Remix applications.
 * This integration will create pageload and navigation spans.
 */
function browserTracingIntegration(options) {
  if (options.instrumentPageLoad === undefined) {
    options.instrumentPageLoad = true;
  }

  if (options.instrumentNavigation === undefined) {
    options.instrumentNavigation = true;
  }

  performance.setGlobals({
    useEffect: options.useEffect,
    useLocation: options.useLocation,
    useMatches: options.useMatches,
    instrumentNavigation: options.instrumentNavigation,
  });

  const browserTracingIntegrationInstance = react.browserTracingIntegration({
    ...options,
    instrumentPageLoad: false,
    instrumentNavigation: false,
  });

  return {
    ...browserTracingIntegrationInstance,
    afterAllSetup(client) {
      browserTracingIntegrationInstance.afterAllSetup(client);

      if (options.instrumentPageLoad) {
        performance.startPageloadSpan();
      }
    },
  };
}

exports.browserTracingIntegration = browserTracingIntegration;
//# sourceMappingURL=browserTracingIntegration.js.map
